<h2 class="verticalspace3">歷史資料</h2>

<%= form_tag(student_history_path, method: :get) do %>
  <%= text_field_tag :search, "", placeholder: '請選擇月份', class: "datepicker col-lg-3", "data-provide" => "datepicker" %>
  <%= button_tag type: 'submit', class: "btn btn-blue btn-md white-hover verticalspace mb-0" do %>
    <i class="fas fa-search"></i>
  <% end %>
<% end %>

<table class='table history'>
  <thead>
    <th class="date">日期</th>
    <th class="time">工時</th>
    <th class="wage">時薪</th>
    <th class="pay">試算</th>
  </thead>
  <tbody>
    <% @salary.each do |salary| %>
    <tr>
      <td class="date"><%= salary.date.strftime("%Y-%m-%d") %></td>
      <td class="time"><%= salary.hr %> 時</td>
      <td class="wage"><%= salary.hourly_wage %> 元</td>
      <td class="pay"><%= money(salary) %> 元</td>
    </tr>
    <% end %>
    <tr>
      <td>總計</td>
      <td><%= calculate_student_salary_hr %> 時</td>
      <td></td>
      <td><%= calculate_studen_salary_sum %> 元</td>
    </tr>
  </tbody>
</table>


<%= area_chart @salary_chart_by_day, ytitle: 'hr' %>

    <%= paginate @salary %>
    <%= link_to student_root_path, class: 'btn btn-gray btn-md' do %>
      <p>
        <i class="fas fa-fast-backward"></i>
        回主選單
      </p>
    <% end %>

<script type="text/javascript">
  $(document).on('turbolinks:load', function(){
    $('.datepicker').datepicker({
      language:'zh-TW',
      format: "yyyy-mm",
      viewMode: 'months',
      minViewMode: 'months',
      autoclose: true
    });    
  });
</script>