<h1 class="verticalspace">工時登錄</h1>

<%= form_tag(staff_salaries_path, method: :get) do %>
  <%= text_field_tag :search %>
  <%= button_tag type: 'submit', class: "btn btn-blue btn-md white-hover verticalspace" do %>
    <p>
      <i class="fas fa-search"></i>
      查詢
    </p>
  <% end %>
<% end %>

<%= link_to "加入學生",staff_users_path, class:"btn btn-org btn-sm" %>

<table class="table table-sm">
  <thead>
    <tr>
      <th>學號</th>
      <th>姓名</th>
      <th>當月工時總和</th>
      <th>當月薪資總和</th>
      <th>編輯</th>
      <th>刪除</th>
    </tr>
  </thead>
  <tbody>
  <% @students.uniq.each do |student| %>
    <tr>
      <td><%= student.number %></td>
      <td><%= link_to student.name, staff_salary_path(student.slug) %></td>
      <td><%= salary_hr(student) %> 時</td>
      <td><%= salary_sum(student) %> 元</td>
      <td><%= link_to edit_staff_salary_path(student.slug), class: 'btn btn-org btn-sm' do %>
          <i class="fas fa-pencil-alt"></i>
        <% end %>
      </td>
      <td><%= link_to "Ｘ", staff_salary_path(student.slug), method: 'delete', class: 'btn btn-red btn-sm white-hover', data: { confirm: "確定要把 #{student.name} 從 #{@department.name} 剔除嗎?" } %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<div class="d-flex justify-content-center">
  <div class="p-2">
    <%= link_to staff_root_path, class: 'btn btn-gray btn-md' do %>
      <p>
        <i class="fas fa-fast-backward"></i>
        回主選單
      </p>
    <% end %>
  </div>
  <div class="p-2">
    <%= paginate @students, theme: 'twitter-bootstrap-4', class:"my-page" %>
  </div>
  <div class="p-2">
    <%= link_to pdf_staff_salaries_path(format: :pdf), class: 'btn btn-pdf btn-md white-hover',:form => {"data-type" => "pdf" }, target: "_blank" do %>
      <p>
        匯出PDF
        <i class="far fa-file-pdf"></i>
      </p>
    <% end %>
  </div>
</div>